(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{583:function(s,t,a){"use strict";a.r(t);var e=a(17),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("å†™è¿™ç¯‡ blog çš„èµ·å› æ˜¯å…¬å¸å¼€å§‹å°è¯•åŸºäº consul å®è·µ service meshï¼Œåœ¨ä¸æ–­å­¦ä¹ è¿‡ç¨‹ä¸­ç¢°åˆ°ä¸€äº›æœ‰è¶£çš„é—®é¢˜ï¼Œä¹Ÿå‘ç°è¿™æ˜¯ä¸€ä¸ªåºå¤§çš„çŸ¥è¯†ä½“ç³»ï¼Œä¸æ˜¯ä¸€äº›ç®€å•çš„ä¸ªäººç¬”è®°èƒ½å½’çº³çš„ï¼Œæ‰€ä»¥å†³å®šç”¨ blog è¿™ç§å…¬å¼€çš„æ–¹å¼ä¸¥è°¨çš„è®°å½•ä¸‹æ¥ï¼Œæä¾›ç»™è‡ªå·±å¤ä¹ å’Œæœ‰ç¼˜äººã€‚")]),s._v(" "),a("p",[s._v("æœ¬ç¯‡å±äº consul çš„å…¥é—¨æ•™ç¨‹ï¼Œåç»­ä¼šå»¶ä¼¸åˆ° service mesh ç­‰å†…å®¹ã€‚")]),s._v(" "),a("h2",{attrs:{id:"æœåŠ¡æ³¨å†Œå’Œè‡ªåŠ¨å‘ç°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æœåŠ¡æ³¨å†Œå’Œè‡ªåŠ¨å‘ç°"}},[s._v("#")]),s._v(" æœåŠ¡æ³¨å†Œå’Œè‡ªåŠ¨å‘ç°")]),s._v(" "),a("p",[s._v("å®é™…ä¸Šï¼Œè‡ªä» docker å¼€å§‹æµè¡Œåï¼Œå¾®æœåŠ¡ä»¥åŠå¾®æœåŠ¡ç›¸å…³è”çš„å‡ ä¸ªåè¯ï¼šã€ŒæœåŠ¡æ³¨å†Œã€ã€ã€Œè‡ªåŠ¨å‘ç°ã€ç­‰å·²ç»è¢«æåŠå¾ˆå¤šéäº†ï¼Œä¸è¿‡ä¸ºäº†æ–‡ç« é˜…è¯»çš„å®Œæ•´æ€§ï¼Œè¿™é‡Œç”¨æˆ‘çš„ç†è§£è§£é‡Šä¸‹ã€ŒæœåŠ¡æ³¨å†Œã€å’Œã€Œè‡ªåŠ¨å‘ç°ã€ã€‚")]),s._v(" "),a("p",[s._v("ä»ä¸€å¼€å§‹ï¼Œå…¬å¸çš„æŸä¸ªé¡¹ç›®åªæœ‰ä¸€ä¸ªä»“åº“ï¼Œæ‰€æœ‰çš„ä»£ç éƒ½åœ¨è¿™ä¸ªä»“åº“ä¸­ï¼Œéšç€ä¸šåŠ¡å‘å±•ä»£ç è¶Šæ¥è¶Šå¤šï¼Œäºæ˜¯è‡ªç„¶è€Œç„¶æœ‰äººæå‡ºï¼šæˆ‘ä»¬æŠŠä»£ç æŒ‰ç…§ä¸šåŠ¡æ‹†åˆ†æˆå¤šä¸ªæ¨¡å—å§ï¼Œç„¶åé€šè¿‡ API æ¥å£äº’ç›¸è°ƒç”¨å§ï¼è¿™ä¸ªæƒ³æ³•å°±æ˜¯å¾®æœåŠ¡çš„æ¦‚å¿µï¼š"),a("strong",[s._v("å°†ä¸€ä¸ªåºå¤§çš„é¡¹ç›®æ ¹æ®æŸäº›é€»è¾‘æ‹†åˆ†æˆå¤šä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—ä¹‹é—´é€šè¿‡ API äº’ç›¸è°ƒç”¨ã€‚")])]),s._v(" "),a("p",[s._v("ç›¸å¯¹äºä¸€ä¸ªä»£ç ä»“åº“è€Œè¨€ï¼Œè¿™ç§èŒæ–°çš„å¾®æœåŠ¡å…·å¤‡ä¸€äº›ä¼˜åŠ¿ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("æ¯ä¸ªæ¨¡å—å¯ä»¥ç‹¬ç«‹ä¸Šçº¿ï¼Œå°¤å…¶å¯¹äºé‚£ç§éœ€è¦ç¼–è¯‘çš„è¯­è¨€ï¼Œä¸€ä¸ªåºå¤§çš„ä»£ç ä»“åº“ç¼–è¯‘éœ€è¦å¾ˆä¹…çš„æ—¶é—´ï¼Œæ‹†åˆ†ä»£ç ä¹‹åå¯ä»¥èŠ‚çœå¾ˆå¤šç¼–è¯‘æ—¶é—´")]),s._v(" "),a("li",[s._v("æµ‹è¯•æ–¹ä¾¿")]),s._v(" "),a("li",[s._v("å¯ä»¥æŠŠã€Œå±ã€å’Œã€Œå·§å…‹åŠ›ã€åˆ†å¼€ï¼šé¡¹ç›®ä»£ç ä¸­ä¼šå­˜åœ¨ä¸€äº›ç³Ÿç³•ä½†æ˜¯å¯ä»¥è¿è¡Œçš„ä»£ç ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘æŠŠè¿™äº›ã€Œå±ã€ä»£ç ç‹¬ç«‹æˆä¸€ä¸ªæ¨¡å—åˆ†ç¦»å‡ºæ¥ï¼Œä¿è¯ä»£ç å¯ä»¥è¿è¡Œï¼Œåç»­å…¶ä»–æ¨¡å—åªéœ€è¦é€šè¿‡ API è°ƒç”¨å³å¯ï¼Œä¸ç”¨å…³å¿ƒä»£ç çš„å¤æ‚é€»è¾‘ã€‚")])]),s._v(" "),a("blockquote",[a("p",[s._v("å…³äºç¬¬ 3 ç‚¹å±•å¼€è®²ä¸€ä¸‹æˆ‘å¯¹äºã€Œé‡æ„ä»£ç ã€çš„æƒ³æ³•ï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œæ¯”è¾ƒå¥½çš„åšæ³•ä¸æ˜¯ç›´æ¥æŠŠç³Ÿç³•çš„ä»£ç é‡å†™ï¼Œè€Œæ˜¯å°½é‡æŠŠç³Ÿç³•çš„ä»£ç å’Œè‰¯å¥½çš„ä»£ç åˆ†å¼€ï¼Œè®©ç³Ÿç³•çš„ä»£ç å¯ä¿æŒç‹¬ç«‹çš„é€»è¾‘è¿è¡Œï¼Œå¯¹å¤–æä¾›è°ƒç”¨æ–¹å¼ã€‚è€Œååœ¨ç³Ÿç³•çš„ä»£ç ä¸­ç»§ç»­åˆ†ç¦»ï¼Œç›´åˆ°æ¶ˆç­ç³Ÿç³•çš„ä»£ç ã€‚")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/chenjiayao/sidergo-posts/master/docs/images/20220429111015.png",alt:""}})]),s._v(" "),a("p",[s._v("ç°åœ¨æˆ‘ä»¬å·²ç»æŠŠä»£ç åˆ’åˆ†æˆ 3 ä¸ªæ¨¡å—ï¼Œç”±äºæœåŠ¡ä¹‹é—´éœ€è¦é€šè¿‡ API é€šä¿¡ï¼Œäºæ˜¯æˆ‘ä»¬ä¼šåœ¨æ¨¡å—çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ æ¯ä¸ªæ¨¡å—çš„åœ°å€ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/chenjiayao/sidergo-posts/master/docs/images/202204291119614.png",alt:""}})]),s._v(" "),a("p",[s._v("åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸåœ¨é¡¹ç›®ä¸­å®è·µå¾®æœåŠ¡äº†ï¼")]),s._v(" "),a("p",[s._v("ä¸è¿‡ï¼Œæˆ‘ä»¬ä¼šç¢°åˆ°æ–°çš„é—®é¢˜ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("service A çš„åœ°å€ä¸æ˜¯å›ºå®šçš„ï¼Œæˆ‘ä»¬æ— æ³•ç¡®å®šé…ç½®æ–‡ä»¶ä¸­ service_a_host` çš„å€¼ã€‚")]),s._v(" "),a("li",[s._v("æŸä¸ªæ¨¡å—å¯èƒ½è®¿é—®é‡ç‰¹åˆ«å¤§ï¼Œå¯¼è‡´è¯¥æ¨¡å—è®¿é—®é€Ÿåº¦ç¼“æ…¢ã€‚")])]),s._v(" "),a("p",[s._v("è¿™ 2 ä¸ªä¸æ˜¯æˆ‘éšä¾¿æ‰¯å‡ºæ¥çš„é—®é¢˜ï¼Œåœ¨å¾®æœåŠ¡çš„å®è·µä¸­å¿…ç„¶ä¼šç¢°åˆ°çš„ã€‚")]),s._v(" "),a("p",[s._v("ä¸ºäº†è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œæœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ€è·¯ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("ç‹¬ç«‹èµ·ä¸€ä¸ªã€Œæ³¨å†Œä¸­å¿ƒã€çš„æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—åœ¨å¯åŠ¨ä¹‹åï¼Œéƒ½å‘æ³¨å†Œä¸­å¿ƒæŠ¥å‘Šè‡ªå·±çš„æœåŠ¡åç§°å’Œè®¿é—®åœ°å€ï¼Œç±»ä¼¼äº "),a("code",[s._v("service_name => service_host")]),s._v(" çš„ kvï¼Œå…¶ä¸­æœåŠ¡åç§°å¯ä»¥è‡ªå®šä¹‰ï¼Œå¹¶ä¸”å…¨å±€å”¯ä¸€ã€‚")]),s._v(" "),a("li",[s._v("å½“ A service è¦è¯·æ±‚ B service æ¥å£æ—¶ï¼Œæ‹¿ç€ B service çš„æœåŠ¡åç§°è¯¢é—®æ³¨å†Œä¸­å¿ƒï¼šB service çš„è®¿é—®åœ°å€æ˜¯å¤šå°‘ï¼Œæ³¨å†Œä¸­å¿ƒè¿”å›è¯¥åœ°å€ï¼ŒA service å°±å¯ä»¥é€šè¿‡è¯¥åœ°å€è®¿é—® B serviceã€‚")])]),s._v(" "),a("p",[s._v("ç¬¬ 1 ç‚¹æåˆ°çš„ã€Œæ¯ä¸ªæ¨¡å—åœ¨å¯åŠ¨ä¹‹åï¼Œéƒ½å‘æ³¨å†Œä¸­å¿ƒæŠ¥å‘Šè‡ªå·±çš„æœåŠ¡åç§°å’Œè®¿é—®åœ°å€ã€å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ã€ŒæœåŠ¡æ³¨å†Œã€ã€‚ç¬¬ 2 ç‚¹é€šè¿‡æ³¨å†Œä¸­å¿ƒè·å–åˆ°å…¶ä»–æœåŠ¡çš„åœ°å€å°±æ˜¯ã€Œè‡ªåŠ¨å‘ç°ã€ã€‚")]),s._v(" "),a("p",[s._v("ç°åœ¨æˆ‘ä»¬æ˜ç™½äº†ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œå’Œè‡ªåŠ¨å‘ç°ï¼Œè¿™ä¸¤ä¸ªç»„åˆåœ¨ä¸€èµ·"),a("strong",[s._v("è§£å†³äº†å¾®æœåŠ¡ä¸­å„ä¸ªæ¨¡å—æ— æ³•ç›¸äº’è®¿é—®çš„é—®é¢˜ã€‚")])]),s._v(" "),a("h2",{attrs:{id:"åœ¨-consul-ä¸­å®è·µæœåŠ¡æ³¨å†Œå’Œè‡ªåŠ¨å‘ç°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åœ¨-consul-ä¸­å®è·µæœåŠ¡æ³¨å†Œå’Œè‡ªåŠ¨å‘ç°"}},[s._v("#")]),s._v(" åœ¨ Consul ä¸­å®è·µæœåŠ¡æ³¨å†Œå’Œè‡ªåŠ¨å‘ç°")]),s._v(" "),a("p",[s._v("ä¸Šé¢è§£é‡ŠæœåŠ¡æ³¨å†Œå’Œè‡ªåŠ¨å‘ç°çš„æ—¶å€™ï¼Œæåˆ°äº†ã€Œæ³¨å†Œä¸­å¿ƒã€ã€‚"),a("a",{attrs:{href:"https://consul.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Consul"),a("OutboundLink")],1),s._v(" åœ¨è¿™é‡Œå°±æ˜¯æ‰®æ¼”æ³¨å†Œä¸­å¿ƒçš„è§’è‰²ã€‚é™¤äº† Consulï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–æ¡†æ¶ï¼Œæ¯”å¦‚ï¼šistioã€Eurekaã€Zookeeper ç­‰ç­‰éƒ½å¯ä»¥ä½œä¸ºæ³¨å†Œä¸­å¿ƒã€‚")]),s._v(" "),a("p",[s._v("ä¸‹é¢æˆ‘ä»¬å¼€å§‹åŸºäº Consul æ¥æ‰‹åŠ¨å®è·µä¸‹ã€‚")]),s._v(" "),a("h3",{attrs:{id:"consul-çš„åŸºæœ¬æ¦‚å¿µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#consul-çš„åŸºæœ¬æ¦‚å¿µ"}},[s._v("#")]),s._v(" Consul çš„åŸºæœ¬æ¦‚å¿µ")]),s._v(" "),a("p",[s._v("Consul ä½¿ç”¨ Go å¼€å‘ï¼Œè¿™æ„å‘³ç€åªéœ€è¦ä¸€ä¸ª bin æ–‡ä»¶å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œä¸è¿‡åç»­æˆ‘ä»¬è¿˜æ˜¯ä¼šä½¿ç”¨ docker æ¥å®è·µã€‚")]),s._v(" "),a("p",[s._v("Consul ä¸­æœ‰ä¸¤ä¸ªè§’è‰²ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("server")]),s._v(" "),a("li",[s._v("client")])]),s._v(" "),a("p",[s._v("ä»£å…¥åˆ°ä¸Šé¢çš„æè¿°ï¼Œserver æ˜¯ä¸Šé¢æåˆ°çš„æ³¨å†Œä¸­å¿ƒï¼Œè€Œ client ä¼šå°†å¾®æœåŠ¡æ¨¡å—çš„è®¿é—®åœ°å€ä¸ŠæŠ¥ç»™ serverã€‚è¿™æ · consul å°±æ»¡è¶³æˆ‘ä»¬å¯¹äºå¾®æœåŠ¡çš„åŸºæœ¬éœ€æ±‚ã€‚")]),s._v(" "),a("p",[s._v("ç”±äºæ‰€æœ‰çš„æ¨¡å—éƒ½éœ€è¦å’Œæ³¨å†Œä¸­å¿ƒé€šä¿¡ï¼Œæ‰€ä»¥æ³¨å†Œä¸­å¿ƒå˜å¾—éå¸¸é‡è¦ï¼Œå¦‚æœæ³¨å†Œä¸­å¿ƒæŒ‚äº†ï¼Œæ•´ä¸ªç³»ç»Ÿå°±æŒ‚äº†ã€‚consul ä¸ºäº†ä¿è¯ server çš„ç¨³å®šæ€§ï¼Œæ”¯æŒ server ä»¥é›†ç¾¤çš„æ¨¡å¼éƒ¨ç½²ï¼Œä»¥ raft åè®®ä»æ‰€æœ‰çš„ server ä¸­é€‰ä¸¾ leaderã€‚ä¸è¿‡æˆ‘ä»¬ç›®å‰ä¸ä¼šæ·±å…¥é›†ç¾¤æ¨¡å¼ï¼Œæ–°æ‰‹ä»»åŠ¡ä¸è¦è¿‡æ—©å»æ‰“ raft è¿™ä¸ªæ€ªã€‚ğŸ˜‚")]),s._v(" "),a("p",[s._v("æ­¤å¤–ï¼Œconsul è¿˜æœ‰ datacenter çš„æ¦‚å¿µï¼Œå¯¹äºè¶…å¤§å‹ç³»ç»Ÿè€Œè¨€ï¼Œä¼šåœ¨åŒ—äº¬å’Œå¹¿å·å„éƒ¨ç½²ä¸€å¥— consul é›†ç¾¤ï¼Œè¿™æ ·å°±æœ‰äº†ä¸¤ä¸ª consul datacenterï¼Œä¸¤ä¸ª datacenter é€šè¿‡ç½‘ç»œäº’é€šã€‚")]),s._v(" "),a("h3",{attrs:{id:"consul-ä¸Šæ‰‹å®è·µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#consul-ä¸Šæ‰‹å®è·µ"}},[s._v("#")]),s._v(" Consul ä¸Šæ‰‹å®è·µ")]),s._v(" "),a("p",[s._v("äº†è§£ä¸Šé¢çš„æ¦‚å¿µä¹‹åï¼Œå°±è¶³å¤Ÿæˆ‘ä»¬æ“ä½œ consul äº†")]),s._v(" "),a("ol",[a("li",[s._v("ä»¥ server è§’è‰²å¯åŠ¨ä¸€ä¸ª consulï¼š")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("// --server"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true è¡¨ç¤ºä»¥ server å¯åŠ¨ consul\n// --bootstrap-expect"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" è¡¨ç¤ºé›†ç¾¤ä¸­éœ€è¦å¯åŠ¨äº†å¤šå°‘ä¸ª server æ•´ä¸ªé›†ç¾¤æ‰ç®—å¯åŠ¨æˆåŠŸï¼Œè¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸º "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" å³å¯ã€‚\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -d --name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("consul-server -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8500")]),s._v(":8500 consul agent --server"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true --bootstrap-expect"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  --client"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0 -ui\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("æ‰§è¡Œ "),a("code",[s._v("docker inspect consul-server | grep IP")]),s._v(" è·å–åˆ° consul-server çš„ IP")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("â¯ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" inspect consul1  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" IP\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LinkLocalIPv6Address"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LinkLocalIPv6PrefixLen"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SecondaryIPAddresses"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SecondaryIPv6Addresses"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GlobalIPv6Address"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GlobalIPv6PrefixLen"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAddress"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.17.0.2"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPPrefixLen"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv6Gateway"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAMConfig"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAddress"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.17.0.2"')]),s._v(",  //consul-server çš„ IP åœ°å€\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPPrefixLen"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(",\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv6Gateway"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GlobalIPv6Address"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GlobalIPv6PrefixLen"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("ä»¥ client è§’è‰²å¯åŠ¨å¦ä¸€ä¸ª consulï¼Œå¹¶è¿æ¥åˆ° consul-server")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("consule-client -d consul agent  -join"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2\n")])])]),a("p",[s._v("æ‰§è¡ŒæˆåŠŸåï¼Œå¯ä»¥é€šè¿‡ http://localhost:8500 è®¿é—® consul")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/chenjiayao/sidergo-posts/master/docs/images/202204291625193.png",alt:""}})]),s._v(" "),a("p",[s._v("é™¤äº† web uiï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è¡ŒæŸ¥çœ‹ä¿¡æ¯ï¼š")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it consul-server "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v("\nconsul members\n\nNode          Address          Status  Type    Build   Protocol  DC   Partition  Segment\nf6e25729245f  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2:8301  alive   server  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.11")]),s._v(".4  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("         dc1  default    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("all"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n7f45cf74e866  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.3:8301  alive   client  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.11")]),s._v(".4  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("         dc1  default    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("default"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("p",[s._v("Type å­—æ®µç”¨äºåŒºåˆ† consul è§’è‰²ã€‚")]),s._v(" "),a("p",[s._v("äº†è§£äº† consul çš„å¯åŠ¨æ“ä½œï¼Œç°åœ¨æˆ‘ä»¬æ¨¡æ‹Ÿä¸¤ä¸ªæœåŠ¡ï¼Œæ¥å®è·µä¸‹æœåŠ¡æ³¨å†Œå’ŒæœåŠ¡å‘ç°ã€‚")])])}),[],!1,null,null,null);t.default=r.exports}}]);